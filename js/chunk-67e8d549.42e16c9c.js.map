{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.regexp.test.js","webpack:///./src/views/UserSetting.vue?e5ba","webpack:///./src/views/UserSetting.vue?e513","webpack:///src/views/UserSetting.vue","webpack:///./src/views/UserSetting.vue?fd9f","webpack:///./src/views/UserSetting.vue"],"names":["$","global","call","uncurryThis","isCallable","isObject","DELEGATES_TO_EXEC","execCalled","re","exec","apply","this","arguments","test","Error","un$Test","target","proto","forced","str","result","render","_vm","_h","$createElement","_c","_self","staticClass","on","$event","preventDefault","handleSubmit","_m","class","invalid","accountHint","isLoading","isProcessing","attrs","_v","directives","name","rawName","value","expression","modifiers","domProps","composing","account","trim","$forceUpdate","_s","_e","nameHint","nameCount","emailHint","email","passwordHint","passwordLength","password","checkHint","checkPassword","passwordCheck","restore","saveHint","staticRenderFns","components","Sidebar","Spinner","data","emailInit","emailCheck","modify","computed","length","watch","newInput","oldInput","created","fetchAccount","methods","userAPI","icon","title","console","$store","state","currentUser","$bus","$emit","component"],"mappings":"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","file":"js/chunk-67e8d549.42e16c9c.js","sourcesContent":["'use strict';\n// TODO: Remove from `core-js@4` since it's moved to entry points\nrequire('../modules/es.regexp.exec');\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar DELEGATES_TO_EXEC = function () {\n  var execCalled = false;\n  var re = /[ac]/;\n  re.exec = function () {\n    execCalled = true;\n    return /./.exec.apply(this, arguments);\n  };\n  return re.test('abc') === true && execCalled;\n}();\n\nvar Error = global.Error;\nvar un$Test = uncurryThis(/./.test);\n\n// `RegExp.prototype.test` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.test\n$({ target: 'RegExp', proto: true, forced: !DELEGATES_TO_EXEC }, {\n  test: function (str) {\n    var exec = this.exec;\n    if (!isCallable(exec)) return un$Test(this, str);\n    var result = call(exec, this, str);\n    if (result !== null && !isObject(result)) {\n      throw new Error('RegExp exec method returned something other than an Object or null');\n    }\n    return !!result;\n  }\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSetting.vue?vue&type=style&index=0&id=272fe92c&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"setting-container\"},[_c('Sidebar'),_c('form',{staticClass:\"setting-form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.handleSubmit.apply(null, arguments)}}},[_vm._m(0),_c('div',{staticClass:\"form-area\"},[_c('div',{staticClass:\"form-row d-flex flex-column\",class:{\n          invalid: _vm.accountHint,\n          'is-loading': _vm.isLoading,\n          'is-processing': _vm.isProcessing\n        }},[_c('label',{attrs:{\"for\":\"account\"}},[_vm._v(\"帳號\")]),_c('div',{staticClass:\"d-flex\"},[_c('span',[_vm._v(\"@\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.account),expression:\"account\",modifiers:{\"trim\":true}}],attrs:{\"id\":\"account\",\"type\":\"text\",\"disabled\":_vm.isLoading || _vm.isProcessing},domProps:{\"value\":(_vm.account)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.account=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('transition',{attrs:{\"name\":\"hint\"}},[(_vm.accountHint)?_c('p',{staticClass:\"error-hint\",attrs:{\"id\":\"account\"}},[_vm._v(\" \"+_vm._s(_vm.accountHint === 'empty' ? '帳號不能空白，請填入想更改的帳號' : 'Account 已經有人使用')+\" \")]):_vm._e()])],1),_c('div',{staticClass:\"form-row d-flex flex-column\",class:{\n          invalid: _vm.nameHint,\n          'is-loading': _vm.isLoading,\n          'is-processing': _vm.isProcessing\n        }},[_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"名稱\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.name),expression:\"name\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\",\"id\":\"name\",\"disabled\":_vm.isLoading || _vm.isProcessing},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('transition',{attrs:{\"name\":\"hint\"}},[(_vm.nameHint)?_c('p',{staticClass:\"error-hint\"},[_vm._v(\"字數超出上限！\")]):_vm._e()]),_c('transition',{attrs:{\"name\":\"hint\"}},[(_vm.nameCount)?_c('p',[_vm._v(_vm._s(_vm.nameCount)+\"/50\")]):_vm._e()])],1),_c('div',{staticClass:\"form-row d-flex flex-column\",class:{\n          invalid: _vm.emailHint,\n          'is-loading': _vm.isLoading,\n          'is-processing': _vm.isProcessing\n        }},[_c('label',{attrs:{\"for\":\"email\"}},[_vm._v(\"Email\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.email),expression:\"email\",modifiers:{\"trim\":true}}],staticClass:\"email\",attrs:{\"type\":\"email\",\"id\":\"email\",\"disabled\":_vm.isLoading || _vm.isProcessing},domProps:{\"value\":(_vm.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.email=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('transition',{attrs:{\"name\":\"hint\"}},[(_vm.emailHint)?_c('p',{staticClass:\"error-hint\"},[_vm._v(\" \"+_vm._s(_vm.emailHint === 'empty' ? 'Email不能空白，請填入想更改的 Email' : 'Email 已經有人使用')+\" \")]):_vm._e()]),_c('transition',{attrs:{\"name\":\"hint\"}},[(_vm.emailCheck)?_c('div',{staticClass:\"hint d-flex align-items-center\"},[_c('svg',{staticClass:\"h-6 w-6\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\"}},[_c('path',{attrs:{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"d\":\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"}})]),_vm._v(\"  輸入的Email 符合格式 \")]):_vm._e()])],1),_c('div',{staticClass:\"form-row d-flex flex-column\",class:{\n          invalid: _vm.passwordHint,\n          'is-loading': _vm.isLoading,\n          'is-processing': _vm.isProcessing\n        }},[_c('label',{attrs:{\"for\":\"password\"}},[_vm._v(\"密碼\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.password),expression:\"password\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"password\",\"id\":\"password\",\"disabled\":_vm.isLoading || _vm.isProcessing},domProps:{\"value\":(_vm.password)},on:{\"blur\":[_vm.passwordLength,function($event){return _vm.$forceUpdate()}],\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value.trim()}}}),_c('transition',{attrs:{\"name\":\"hint\"}},[(_vm.passwordHint)?_c('p',{staticClass:\"error-hint\"},[_vm._v(\"密碼至少要有４個字\")]):_vm._e()])],1),_c('div',{staticClass:\"form-row d-flex flex-column\",class:{\n          invalid: _vm.checkHint,\n          'is-loading': _vm.isLoading,\n          'is-processing': _vm.isProcessing\n        }},[_c('label',{attrs:{\"for\":\"passwordCheck\"}},[_vm._v(\"密碼確認\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.passwordCheck),expression:\"passwordCheck\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"password\",\"id\":\"passwordCheck\",\"disabled\":_vm.isLoading || _vm.isProcessing},domProps:{\"value\":(_vm.passwordCheck)},on:{\"blur\":[_vm.checkPassword,function($event){return _vm.$forceUpdate()}],\"input\":function($event){if($event.target.composing){ return; }_vm.passwordCheck=$event.target.value.trim()}}}),_c('transition',{attrs:{\"name\":\"hint\"}},[(_vm.checkHint)?_c('p',{staticClass:\"error-hint\"},[_vm._v(\"密碼確認錯誤！\")]):_vm._e()])],1),_c('div',{staticClass:\"footer\"},[_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.modify)?_c('button',{staticClass:\"restore\",attrs:{\"type\":\"button\",\"disabled\":_vm.isProcessing},on:{\"click\":_vm.restore}},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\",\"width\":\"512\",\"height\":\"512\"}},[_c('path',{attrs:{\"d\":\"M12,0A11.972,11.972,0,0,0,4,3.073V1A1,1,0,0,0,2,1V4A3,3,0,0,0,5,7H8A1,1,0,0,0,8,5H5a.854.854,0,0,1-.1-.021A9.987,9.987,0,1,1,2,12a1,1,0,0,0-2,0A12,12,0,1,0,12,0Z\"}}),_c('path',{attrs:{\"d\":\"M12,6a1,1,0,0,0-1,1v5a1,1,0,0,0,.293.707l3,3a1,1,0,0,0,1.414-1.414L13,11.586V7A1,1,0,0,0,12,6Z\"}})]),_vm._v(\" 回復設定 \")]):_vm._e()]),_c('button',{staticClass:\"save\",attrs:{\"type\":\"submit\",\"disabled\":_vm.isProcessing},on:{\"mouseenter\":_vm.saveHint}},[(_vm.isProcessing)?_c('Spinner'):_vm._e(),_vm._v(\" \"+_vm._s(_vm.isProcessing ? '儲存中..' : '儲存')+\" \")],1)],1)])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-header\"},[_c('h2',{staticClass:\"title\"},[_vm._v(\"帳戶設定\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"setting-container\">\n    <Sidebar />\n    <form class=\"setting-form\" @submit.prevent=\"handleSubmit\">\n      <div class=\"form-header\">\n        <h2 class=\"title\">帳戶設定</h2>\n      </div>\n\n      <div class=\"form-area\">\n        <div\n          class=\"form-row d-flex flex-column\"\n          :class=\"{\n            invalid: accountHint,\n            'is-loading': isLoading,\n            'is-processing': isProcessing\n          }\"\n        >\n          <label for=\"account\">帳號</label>\n\n          <div class=\"d-flex\">\n            <span>@</span>\n            <input\n              v-model.trim=\"account\"\n              id=\"account\"\n              type=\"text\"\n              :disabled=\"isLoading || isProcessing\"\n            />\n          </div>\n\n          <transition name=\"hint\">\n            <p v-if=\"accountHint\" id=\"account\" class=\"error-hint\">\n              {{\n                accountHint === 'empty'\n                  ? '帳號不能空白，請填入想更改的帳號'\n                  : 'Account 已經有人使用'\n              }}\n            </p>\n          </transition>\n        </div>\n\n        <div\n          class=\"form-row d-flex flex-column\"\n          :class=\"{\n            invalid: nameHint,\n            'is-loading': isLoading,\n            'is-processing': isProcessing\n          }\"\n        >\n          <label for=\"name\">名稱</label>\n          <input\n            v-model.trim=\"name\"\n            type=\"text\"\n            id=\"name\"\n            :disabled=\"isLoading || isProcessing\"\n          />\n\n          <transition name=\"hint\">\n            <p v-if=\"nameHint\" class=\"error-hint\">字數超出上限！</p>\n          </transition>\n\n          <transition name=\"hint\">\n            <p v-if=\"nameCount\">{{ nameCount }}/50</p>\n          </transition>\n        </div>\n\n        <div\n          class=\"form-row d-flex flex-column\"\n          :class=\"{\n            invalid: emailHint,\n            'is-loading': isLoading,\n            'is-processing': isProcessing\n          }\"\n        >\n          <label for=\"email\">Email</label>\n          <input\n            v-model.trim=\"email\"\n            class=\"email\"\n            type=\"email\"\n            id=\"email\"\n            :disabled=\"isLoading || isProcessing\"\n          />\n          <transition name=\"hint\">\n            <p v-if=\"emailHint\" class=\"error-hint\">\n              {{\n                emailHint === 'empty'\n                  ? 'Email不能空白，請填入想更改的 Email'\n                  : 'Email 已經有人使用'\n              }}\n            </p>\n          </transition>\n\n          <transition name=\"hint\">\n            <div v-if=\"emailCheck\" class=\"hint d-flex align-items-center\">\n              <!-- check SVG -->\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                class=\"h-6 w-6\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n                stroke-width=\"2\"\n              >\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                />\n              </svg>\n              <!-- check SVG -->\n              &thinsp;輸入的Email 符合格式\n            </div>\n          </transition>\n        </div>\n\n        <div\n          class=\"form-row d-flex flex-column\"\n          :class=\"{\n            invalid: passwordHint,\n            'is-loading': isLoading,\n            'is-processing': isProcessing\n          }\"\n        >\n          <label for=\"password\">密碼</label>\n          <input\n            v-model.trim=\"password\"\n            @blur=\"passwordLength\"\n            type=\"password\"\n            id=\"password\"\n            :disabled=\"isLoading || isProcessing\"\n          />\n          <transition name=\"hint\">\n            <p v-if=\"passwordHint\" class=\"error-hint\">密碼至少要有４個字</p>\n          </transition>\n        </div>\n\n        <div\n          class=\"form-row d-flex flex-column\"\n          :class=\"{\n            invalid: checkHint,\n            'is-loading': isLoading,\n            'is-processing': isProcessing\n          }\"\n        >\n          <label for=\"passwordCheck\">密碼確認</label>\n          <input\n            v-model.trim=\"passwordCheck\"\n            @blur=\"checkPassword\"\n            type=\"password\"\n            id=\"passwordCheck\"\n            :disabled=\"isLoading || isProcessing\"\n          />\n          <transition name=\"hint\">\n            <p v-if=\"checkHint\" class=\"error-hint\">密碼確認錯誤！</p>\n          </transition>\n        </div>\n\n        <div class=\"footer\">\n          <transition name=\"fade\">\n            <button\n              v-if=\"modify\"\n              @click=\"restore\"\n              type=\"button\"\n              class=\"restore\"\n              :disabled=\"isProcessing\"\n            >\n              <!-- time past SVG -->\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 24 24\"\n                width=\"512\"\n                height=\"512\"\n              >\n                <path\n                  d=\"M12,0A11.972,11.972,0,0,0,4,3.073V1A1,1,0,0,0,2,1V4A3,3,0,0,0,5,7H8A1,1,0,0,0,8,5H5a.854.854,0,0,1-.1-.021A9.987,9.987,0,1,1,2,12a1,1,0,0,0-2,0A12,12,0,1,0,12,0Z\"\n                />\n                <path\n                  d=\"M12,6a1,1,0,0,0-1,1v5a1,1,0,0,0,.293.707l3,3a1,1,0,0,0,1.414-1.414L13,11.586V7A1,1,0,0,0,12,6Z\"\n                />\n              </svg>\n              <!-- time past SVG -->\n              回復設定\n            </button>\n          </transition>\n\n          <button\n            type=\"submit\"\n            @mouseenter=\"saveHint\"\n            class=\"save\"\n            :disabled=\"isProcessing\"\n          >\n            <Spinner v-if=\"isProcessing\" />\n            {{ isProcessing ? '儲存中..' : '儲存' }}\n          </button>\n        </div>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport Sidebar from '../components/Sidebar.vue'\nimport Spinner from '../components/Spinner.vue'\n\nimport userAPI from '../apis/user'\n\nexport default {\n  components: {\n    Sidebar,\n    Spinner\n  },\n\n  data() {\n    return {\n      isLoading: true,\n      account: '',\n      accountHint: false,\n      name: '',\n      nameHint: false,\n      email: '',\n      emailInit: '',\n      emailHint: false,\n      emailCheck: false,\n      password: '',\n      passwordHint: false,\n      passwordCheck: '',\n      checkHint: false,\n      modify: false,\n      isProcessing: false\n    }\n  },\n\n  computed: {\n    nameCount() {\n      this.name.length > 50 ? (this.nameHint = true) : (this.nameHint = false)\n      return this.name.length\n    }\n  },\n\n  watch: {\n    account(newInput) {\n      newInput ? (this.accountHint = false) : (this.accountHint = 'empty')\n\n      newInput !== this.$store.state.currentUser.account\n        ? (this.modify = true)\n        : (this.modify = false)\n    },\n\n    name(newInput) {\n      newInput !== this.$store.state.currentUser.name\n        ? (this.modify = true)\n        : (this.modify = false)\n    },\n\n    email(newInput) {\n      newInput ? (this.emailHint = false) : (this.emailHint = 'empty')\n\n      newInput.match(/[^@\\s]+@[^@\\s]+\\.[^@\\s]+/)\n        ? (this.emailCheck = true)\n        : (this.emailCheck = false)\n\n      newInput !== this.emailInit ? (this.modify = true) : (this.modify = false)\n    },\n\n    password(newInput, oldInput) {\n      newInput !== oldInput && (this.passwordHint = false)\n    },\n\n    passwordCheck(newInput, oldInput) {\n      newInput !== oldInput && (this.checkHint = false)\n    }\n  },\n\n  created() {\n    this.fetchAccount()\n  },\n\n  methods: {\n    passwordLength() {\n      this.password && this.password.length < 4\n        ? (this.passwordHint = true)\n        : (this.passwordHint = false)\n    },\n\n    checkPassword() {\n      this.passwordCheck && this.password !== this.passwordCheck\n        ? (this.checkHint = true)\n        : (this.checkHint = false)\n    },\n\n    async fetchAccount() {\n      this.isLoading = true\n      try {\n        const { data } = await userAPI.getCurrent()\n\n        if (data.status !== 'success') {\n          this.$bus.$emit('toast', {\n            icon: 'error',\n            title: '無法取得資料'\n          })\n        }\n\n        const { account, name, email } = data.data\n        this.account = account\n        this.name = name\n        this.email = email\n        this.emailInit = email\n      } catch (error) {\n        console.log(error)\n        this.$bus.$emit({ title: `${error}` })\n      } finally {\n        this.isLoading = false\n      }\n    },\n\n    async handleSubmit() {\n      // 前端驗證\n      if (!this.modify && !this.password) {\n        this.$bus.$emit('toast', {\n          icon: 'error',\n          title: '你沒有修改任何帳戶資料喔'\n        })\n\n        return\n      }\n\n      if (!this.account) {\n        this.$bus.$emit('toast', {\n          icon: 'error',\n          title: '請填入想更改的帳號'\n        })\n\n        return\n      }\n\n      if (this.name.length > 50) {\n        this.$bus.$emit('toast', { icon: 'error', title: '字數超出上限！' })\n      }\n\n      if (!this.email) {\n        this.$bus.$emit('toast', { icon: 'error', title: '請填入 Email' })\n\n        return\n      } else if (!/[^@\\s]+@[^@\\s]+\\.[^@\\s]+/.test(this.email)) {\n        this.$bus.$emit('toast', { icon: 'error', title: 'Email 格式錯誤' })\n        return\n      }\n\n      if (this.password && this.password.length < 4) {\n        this.$bus.$emit('toast', {\n          icon: 'error',\n          title: '密碼至少要有四個字'\n        })\n\n        return\n      }\n      // 密碼確認欄位\n      if (this.password && !this.passwordCheck) {\n        this.$bus.$emit('toast', {\n          icon: 'error',\n          title: '請再次輸入密碼'\n        })\n\n        return\n      } else if (this.password !== this.passwordCheck) {\n        this.$bus.$emit('toast', {\n          icon: 'error',\n          title: '密碼與密碼確認輸入內容不同'\n        })\n\n        return\n      }\n\n      this.isProcessing = true\n      try {\n        const { data } = await userAPI.editAccount({\n          account: this.account,\n          name: this.name,\n          email: this.email,\n          password: this.password\n        })\n\n        if (data.status !== 'success') {\n          throw new Error(data.message)\n        }\n\n        this.fetchAccount()\n        this.$store.dispatch('fetchCurrentUser')\n\n        this.$bus.$emit('toast', {\n          icon: 'success',\n          title: '資料修改成功'\n        })\n\n        this.modify = false\n      } catch (error) {\n        console.log(error)\n\n        // 後端驗證\n        if (\n          error.message.match(/account/i) &&\n          error.message.match(/required/i)\n        ) {\n          // 帳號\n          this.$bus.$emit('toast', {\n            icon: 'error',\n            title: '帳號不能空白'\n          })\n\n          this.accountHint = 'empty'\n\n        } else if (error.message.match(/暱稱/) && error.message.match(/上限/)) {\n          // 名稱\n          this.$bus.$emit('toast', {\n            icon: 'error',\n            title: '名稱字數超過上限'\n          })\n\n          this.nameHint = true\n        }else if (error.message.match(/email/i) && error.message.match(/required/i)) {\n          // email\n          this.$bus.$emit('toast', {\n            icon: 'error',\n            title: 'Email 不能空白'\n          })\n\n          this.emailHint = 'empty'\n        }else if (error.message.match(/密碼至少/)) {\n          // 密碼\n          this.$bus.$emit('toast', {\n            icon: 'error',\n            title: '密碼至少要有四個字'\n          })\n\n          this.passwordHint = true\n        } else {\n          // 其他錯誤訊息\n          this.$bus.$emit('toast', {\n            icon: 'error',\n            title: `${error.message}`\n          })\n        }\n      } finally {\n        this.isProcessing = false\n      }\n    },\n\n    restore() {\n      this.isLoading = true\n\n      this.account = this.$store.state.currentUser.account\n      this.name = this.$store.state.currentUser.name\n      this.email = this.emailInit\n      this.password = ''\n      this.passwordCheck = ''\n\n      this.isLoading = false\n    },\n\n    saveHint() {\n      if (this.modify) {\n        this.$bus.$emit('toast', {\n          icon: 'success',\n          title: '尚未儲存前，都可以回復原本帳戶資料'\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../styles/formCommon.scss';\n\n.setting-container {\n  display: flex;\n}\n\n.setting-form {\n  flex-grow: 1;\n  // for mobile layout\n  margin-left: 12px;\n\n  border-left: 1px solid var(--theme-line);\n}\n\n.form-header {\n  border-bottom: 1px solid var(--theme-line);\n  padding: 13px 20px;\n\n  h2.title {\n    color: var(--main-text);\n    font-size: 19px;\n    line-height: 28px;\n\n    font-weight: 700;\n  }\n}\n\n.form-area {\n  min-width: 460px;\n  // for mobile layout\n  padding: 30px 5% 0;\n}\n\n.footer {\n  text-align: end;\n\n  button {\n    // for mobile layout\n    padding: 10px 20px;\n\n    // for mobile layout\n    --font-size: 16px;\n    line-height: 24px;\n  }\n\n  button:nth-last-child(n + 2) {\n    margin-right: 1em;\n  }\n\n  button.save {\n    .spinner {\n      position: relative;\n\n      margin-right: 0.25em;\n\n      --spinner-size: inherit;\n      --spinner-color: var(--just-white);\n    }\n  }\n\n  button.restore {\n    svg {\n      margin-right: 0.1em;\n      transform: translateY(15%);\n    }\n\n    &.fade-enter-active,\n    &.fade-leave-active {\n      transition: opacity 0.35s ease-out;\n    }\n\n    &.fade-enter,\n    &.fade-leave-to {\n      opacity: 0;\n    }\n  }\n}\n\n.form-row {\n  // 帳號欄\n  &:nth-child(1) {\n    span {\n      color: var(--main-text);\n    }\n  }\n\n  &:nth-last-child(2) {\n    margin-bottom: 40px;\n  }\n}\n\n@media screen and (min-width: $breakpoint) {\n  .setting-form {\n    margin-left: 65px;\n  }\n\n  .form-area {\n    max-width: 642px;\n    padding: 30px 16px 0;\n  }\n\n  .footer {\n    button {\n      padding: 10px 40px;\n\n      --font-size: 18px;\n      line-height: 26px;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSetting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSetting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserSetting.vue?vue&type=template&id=272fe92c&scoped=true&\"\nimport script from \"./UserSetting.vue?vue&type=script&lang=js&\"\nexport * from \"./UserSetting.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserSetting.vue?vue&type=style&index=0&id=272fe92c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"272fe92c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}